<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="row">
                <ul class="list-group">
                    <li ng-repeat="appRepo in appRepositories" class="list-group-item">{{appRepo.name}}<br/><small class="text-muted">{{appRepo.path}}</small></li>
                </ul>
                <p ng-if="!appRepositories || appRepositories.length === 0">No App Repositories</p>
            </div>
            <div class="row">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Add Repository
                    </div>
                    <div class="panel-body">
                        <form class="form-inline">
                            <input ng-model="newApp.path" type="text" class="form-control" id="path" placeholder="Full path to .git folder">
                            <button ng-click="addApp()" type="submit" class="btn btn-default">Add</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <button class="btn btn-default pull-right" ng-click="refresh()"><span class="octicon octicon-sync"></span> Refresh</button>
            <uib-tabset>
                <uib-tab ng-repeat="appRepository in appRepositories" heading="{{appRepository.name}}" active="appRepository.active" disable="appRepository.disabled">
                    <div style="padding-top:10px;">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">{{appRepository.name}} / <strong>{{repoData[appRepository.name].activeBranch.name}}</strong> <i style="margin-left:10px;" class="fa fa-refresh fa-spin" ng-if="repoData[appRepository.name].loading"></i> <span ng-if="repoData[appRepository.name].status.uncommittedChanges.length" class="badge pull-right">{{repoData[appRepository.name].status.uncommittedChanges.length}}</span></h3>
                            </div>
                            <div class="panel-body">
                                <div class="form-group">
                                    <label>Select Branch</label>
                                    <select class="form-control" ng-model="repoData[appRepository.name].selectedBranch" ng-options="gitBranch.name for gitBranch in repoData[appRepository.name].branches track by gitBranch.fullName">
                                    </select>
                                </div>
                                <button class="btn btn-default btn-bg" ng-click="checkout(appRepository.name)"><i class="fa fa-random"></i> Checkout Selected Branch</button>
                                <button class="btn btn-default btn-bg" ng-click="deleteBranch(appRepository.name)"><span class="octicon octicon-x"></span> Delete Selected Branch</button>
                            </div>
                            <div class="panel-footer">
                                <button class="btn btn-default btn-bg" ng-click="pull(appRepository.path, appRepository.name)"><span class="octicon octicon-git-pull-request"></span> Pull</button>
                                <button class="btn btn-default btn-bg" data-toggle="modal" ng-click="showCreateModal(appRepository.name)"><span class="octicon octicon-git-branch"></span> Create Branch</button>
                                <button class="btn btn-default btn-bg" ng-click="rebase(appRepository.name)"><i class="fa fa-undo"></i> Rebase</button>
                                <button class="btn btn-default btn-bg" ng-click="revert(appRepository.name)"><i class="fa fa-history"></i> Revert</button>
                                <button class="btn btn-default btn-bg" ng-click="showCommitModal(appRepository.name)"><span class="octicon octicon-git-commit"></span> Commit</button>
                                <button class="btn btn-default btn-bg" ng-click="push(appRepository.name)"><span class="octicon octicon-cloud-upload"></span> Push</button>
                            </div>
                        </div>
                    </div>
                </uib-tab>
            </uib-tabset>
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Log</h3>
                        </div>
                        <div class="panel-body" ng-bind-html="log.messages" style="overflow-y:auto;height:150px;">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="create-branch-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Create Branch</h4>
            </div>
            <div class="modal-body">
                <form name="branchForm" class="form">
                    <div class="form-group">
                        <label for="branchName">Branch Name</label>
                        <input ng-model="newBranch.name" type="text" class="form-control" id="branchName" placeholder="Branch Name">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" ng-click="saveNewBranch()" class="btn btn-primary">Save</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="commit-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Commit Changes</h4>
            </div>
            <div class="modal-body">
                <div class="panel panel-default">
                    <div class="panel-heading">Unstaged Files</div>
                    <ul class="list-group" style="overflow:hidden;height:150px;">
                        <li ng-repeat="file in selectedApp.status.modified" class="list-group-item">{{file}} <input class="pull-right" type="checkbox" ng-click="add(selectedApp.name, file)"/></li>
                        <li ng-if="!selectedApp.status.modified || selectedApp.status.modified.length === 0" class="list-group-item">No files currently uncommitted</li>
                    </ul>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">Staged Files</div>
                    <ul class="list-group" style="overflow:hidden;height:150px;">
                        <li ng-repeat="file in selectedApp.status.changed" class="list-group-item">{{file}} <input class="pull-right" type="checkbox" checked="checked" ng-click="remove(selectedApp.name, file)"/></li>
                        <li ng-if="!selectedApp.status.changed  || selectedApp.status.changed.length === 0" class="list-group-item">No files currently staged</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label for="commit-message">Commit Message</label>
                    <input ng-model="selectedApp.commitMessage" type="text" class="form-control" id="commit-message" placeholder="Commit Message">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" ng-disabled="!selectedApp.status.changed  || selectedApp.status.changed.length === 0" ng-click="commit(selectedApp.name, selectedApp.commitMessage)" class="btn btn-primary">Commit</button>
            </div>
        </div>
    </div>
</div>